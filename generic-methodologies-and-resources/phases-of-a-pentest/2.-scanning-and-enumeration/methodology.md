# Methodology

**Scanning und Enumeration** sind wichtige Phasen im Penetration Testing, die nach der **Reconnaissance** (Aufklärung) kommen. Ziel dieser Phasen ist es, detaillierte Informationen über ein Ziel zu sammeln, um Sicherheitslücken zu identifizieren und mögliche Angriffswege aufzudecken. Hier ist die Methodik für Scanning und Enumeration, strukturiert nach drei Ebenen und sechs Schichten, die auf der **Reconnaissance Methodology** basieren.

**Die drei Ebenen der Enumeration:**

1. **Infrastruktur-basierte Enumeration**:
   * Fokus liegt auf der Untersuchung des Netzwerks und der physischen Systeme.
   * Tools: **Nmap**, **Masscan**.
   * **Ziel**: Informationen über Netzwerkgeräte, Topologien und verbundene Systeme herausfinden.
2. **Host-basierte Enumeration**:
   * Untersucht individuelle Systeme und deren spezifische Dienste.
   * Tools: **Netcat**, **Nmap Service Scan**.
   * **Ziel**: Identifizierung und Untersuchung der Dienste und Anwendungen, die auf Hosts laufen.
3. **OS-basierte Enumeration**:
   * Sammlung von Informationen über das Betriebssystem, die Version und die Konfiguration.
   * Tools: **Nmap OS Detection**, **WinRM**, **SNMP**.
   * **Ziel**: Betriebssystem-Versionen, Patch-Level und sicherheitsrelevante Konfigurationen zu ermitteln.

**Die sechs Schichten der Enumeration:**

1. **Internet Presence**:
   * **Ziel**: Identifikation der Internetpräsenz und der externen Infrastruktur.
   * **Informationen**: Domains, Subdomains, IP-Adressen, Netzblöcke.
   * **Tools**: **Sublist3r**, **Amass**, **Nmap**.
   * **Beispiel**: Verwende Tools wie **Sublist3r**, um Subdomains zu identifizieren und Schwachstellen im Internetauftritt zu erkennen.
2. **Gateway**:
   * **Ziel**: Erkennen der Schutzmechanismen, die die interne Infrastruktur sichern.
   * **Informationen**: Firewalls, IDS/IPS, VPNs.
   * **Tools**: **Nmap**, **Hping3**, **TTL-Analyse**.
   * **Beispiel**: Verwende **Nmap** für die Firewall-Analyse, um herauszufinden, welche Ports gefiltert werden und wie der Netzwerkzugriff kontrolliert wird.
3. **Accessible Services**:
   * **Ziel**: Identifikation und Verständnis der öffentlich zugänglichen Dienste.
   * **Informationen**: Offene Ports, Versionsnummern, Schnittstellen.
   * **Tools**: **Nmap**, **Netcat**, **Nikto**.
   * **Beispiel**: Verwende **Nmap** mit Skripten (`-sV -sC`), um die Versionsinformationen der Dienste wie HTTP oder FTP zu erkennen und mögliche Schwachstellen zu identifizieren.
4. **Processes**:
   * **Ziel**: Verständnis der laufenden Prozesse und deren Interaktionen.
   * **Informationen**: PID, verarbeitete Daten, Aufgaben.
   * **Tools**: **PS Remoting**, **SSH**, **WinRM**.
   * **Beispiel**: Nach der Anmeldung auf einem Zielhost, verwende **ps** oder **tasklist**, um laufende Prozesse zu analysieren und festzustellen, welche Dienste potenziell Sicherheitsprobleme verursachen könnten.
5. **Privileges**:
   * **Ziel**: Identifikation der Berechtigungen und Privilegien innerhalb des Systems.
   * **Informationen**: Benutzergruppen, Rechte, Admin-Accounts.
   * **Tools**: **enum4linux**, **rpcclient**, **WinRM**.
   * **Beispiel**: Verwende **enum4linux** auf einem Windows-Zielsystem, um herauszufinden, welche Benutzer administrative Rechte haben und ob es möglich ist, diese Rechte auszunutzen.
6. **OS Setup**:
   * **Ziel**: Verstehen der Betriebssystem-Konfiguration und Sicherheitsmaßnahmen.
   * **Informationen**: Betriebssystemtyp, Patch-Level, Konfigurationsdateien.
   * **Tools**: **Nmap**, **WinRM**, **SNMP**, **SMB**.
   * **Beispiel**: Verwende **Nmap OS Detection** (`-O`), um das Betriebssystem und dessen Patch-Level zu identifizieren. Versuche danach, Konfigurationsdateien auszulesen, um mögliche Schwachstellen zu finden.

**Praktische Anwendung der Scanning- und Enumeration-Methodik**

Diese Methodik bietet einen strukturierten Ansatz, um beim Scanning und bei der Enumeration nichts zu übersehen. Sie kann je nach Ziel dynamisch angepasst werden, um möglichst viele Informationen zu sammeln.

**Beispiel eines Black-Box-Penetrationstests**:

1. **Internet Presence**: Starte mit der Identifikation der Internetpräsenz (Domains, Subdomains, IP-Adressen).
   * Tools wie **Amass** oder **Sublist3r** helfen, Subdomains zu identifizieren.
2. **Gateway**: Analysiere die Gateway-Schutzmechanismen (Firewalls, IDS).
   * Verwende **Nmap** zur Firewall-Analyse, um festzustellen, welche Ports zugänglich sind.
3. **Accessible Services**: Identifiziere zugängliche Dienste und deren Schwachstellen.
   * Scanne mit **Nmap** (`-sV`) die Dienste und identifiziere potenzielle Sicherheitslücken.

Durch diesen systematischen Ansatz kannst du effizient vorgehen und sicherstellen, dass du bei der Informationsbeschaffung alle relevanten Bereiche abdeckst. Jede Schicht und Ebene der Enumeration liefert wertvolle Details, die es ermöglichen, mögliche Schwachstellen im Zielsystem zu finden und zu verstehen, wie ein Angriff am effektivsten durchgeführt werden könnte.
