# 21 - FTP

### FTP (File Transfer Protocol)

**FTP** ist ein Protokoll, um Dateien zwischen einem Client (dein Computer) und einem Server zu übertragen. Du kannst Dateien hoch- und herunterladen. Es läuft über die **Ports 21** (Steuerkanal) und **20** (Datenkanal).

#### FTP-Modi

* **Aktiver Modus**: Der Client öffnet die Verbindung über Port 21 und der Server sendet die Daten an einen Client-Port. Problematisch hinter Firewalls.
* **Passiver Modus**: Der Server gibt einen Port an, auf den sich der Client verbindet. Sicherer hinter Firewalls.

#### FTP-Befehle:

* `put <Datei>` – Datei auf den Server hochladen.
* `get <Datei>` – Datei vom Server herunterladen.
* `ls` – Auflisten von Verzeichnissen.
* `quit` – FTP-Sitzung beenden.

#### Beispiel für FTP-Nutzung:

1.  Verbinde dich mit einem Server:

    ```bash
    bashCode kopierenftp <Server-IP>
    ```
2.  Lade eine Datei hoch:

    ```bash
    bashCode kopierenput meine_datei.txt
    ```
3.  Lade eine Datei herunter:

    ```bash
    bashCode kopierenget dokument.pdf
    ```
4.  Sitzung beenden:

    ```bash
    bashCode kopierenquit
    ```

#### Sicherheit:

* **Unverschlüsselt**: FTP überträgt Daten und Passwörter im Klartext, was bedeutet, dass sie abgefangen werden können.
* Verwende **FTPS** (FTP über SSL/TLS) oder **SFTP** (über SSH), um Daten sicher zu übertragen.

***

### TFTP (Trivial File Transfer Protocol)

**TFTP** ist eine einfache und weniger sichere Version von FTP. Es verwendet **UDP** statt **TCP**, was schneller ist, aber keine Fehlerkorrektur bietet. TFTP wird hauptsächlich in **sicheren Netzwerken** verwendet, da es keine Benutzeranmeldung unterstützt.

#### TFTP-Befehle:

* `get <Datei>` – Datei vom Server herunterladen.
* `put <Datei>` – Datei auf den Server hochladen.
* `quit` – TFTP-Sitzung beenden.

#### Beispiel für TFTP-Nutzung:

1.  Verbinde dich mit einem TFTP-Server:

    ```bash
    bashCode kopierentftp <Server-IP>
    ```
2.  Datei herunterladen:

    ```bash
    bashCode kopierenget daten.txt
    ```
3.  Datei hochladen:

    ```bash
    bashCode kopierenput neue_daten.txt
    ```
4.  Sitzung beenden:

    ```bash
    bashCode kopierenquit
    ```

#### Unterschied zwischen FTP und TFTP:

| **FTP**                                      | **TFTP**                                 |
| -------------------------------------------- | ---------------------------------------- |
| Nutzt **TCP** (Zuverlässig)                  | Nutzt **UDP** (Schneller, aber unsicher) |
| Benötigt **Login** (Benutzername/Passwort)   | Keine Authentifizierung                  |
| Zeigt **Verzeichnisse** an                   | Zeigt keine Verzeichnisse                |
| Wird für **Internet-Verbindungen** verwendet | Wird für **lokale Netzwerke** verwendet  |

***

### vsFTPd (FTP-Server auf Linux)

**vsFTPd** ist ein beliebter FTP-Server unter Linux. So richtest du ihn ein:

#### 1. Installation:

```bash
bashCode kopierensudo apt install vsftpd
```

#### 2. Wichtige Konfigurationen (in `/etc/vsftpd.conf`):

* `anonymous_enable=NO`: Deaktiviert anonymen Zugriff.
* `local_enable=YES`: Erlaubt lokalen Benutzern den Login.
* `write_enable=YES`: Erlaubt das Hochladen von Dateien.

#### Beispiel: FTP-Server nutzen

1.  Verbindung zum Server herstellen:

    ```bash
    bashCode kopierenftp <Server-IP>
    ```
2.  Datei hochladen:

    ```bash
    bashCode kopierenput test.txt
    ```
3.  Datei herunterladen:

    ```bash
    bashCode kopierenget daten.txt
    ```

#### Sicherheitsaspekte:

* In der Datei `/etc/ftpusers` kannst du festlegen, welche Benutzer **keinen** Zugriff auf den Server haben.
* **Anonymer Zugriff** kann unsicher sein. Stelle sicher, dass `anonymous_enable=NO` gesetzt ist, um unbefugten Zugriff zu verhindern.

***

### Zusammenfassung:

* **FTP**: Gut für große Dateiübertragungen, benötigt Benutzername/Passwort, **unsicher** ohne Verschlüsselung.
* **TFTP**: Einfach, schnell, aber unsicher. Geeignet für **lokale Netzwerke**, keine Authentifizierung.
* **vsFTPd**: Einfache Installation eines FTP-Servers auf Linux. Konfiguriere ihn sicher und schränke anonymen Zugriff ein.
